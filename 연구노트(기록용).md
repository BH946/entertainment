## 필독

**도메인 shop 1년 550원 결재 -> etbh.shop**

**컨트롤러 개발에는 리딩만 오픈하고 나머지 CRUD는 관리자용 인증으로 막아두자.**  
=> 관리자 인증은 Security로 role로 막고+JWT방식!, IP도 내부IP만 허용ㄱㄱ(cafe24의 내부IP)  
=> 이건 나중에 배포전에 Security 추가할때 ㄱㄱ (쳌리에도 기록하기!!)

DoS(Denial of Service) 및 DDoS(Distributed Denial of Service) 공격을 방지는 Security로 보호하거나, 서버단에서 보호하자(nginx rate limiting 같은거)  
=> 이것도 나중에 배포전에 ㄱㄱ (쳌리에도 기록하기!)

ResponseEntity<Long> save() 반환 이유: 클라가 수정,삭제,조회를 추후에 하기 용이해서(어차피 Long말곤 그냥 대충 String반환할테니 의미없자나) => 쳌리에 기록하자. 적당한 위치에

@MockBean이 3.4.0 부터 deprecated 됨(지원X)  
=> @MockitoBean 으로 변경 (주체가 Spring Boot에서 Spring Framework로 변경) => 쳌리 기록ㄱ

Mock테스트에서(컨트롤러) @Valid도 잘 동작하는지 보려는데 동작을 안한다. 왜? 와이?  
=> 알아보니 그냥 import를 @Notnull을 jakatra로 안해서 그랬다 ㅠ. **의존성 추가해야 뜸!!** (쳌리 ㄱ)

JPA Buddy 플러그인 깔아서 인텔리J에서 엔티티바로 SQL-DDL 뽑아서 ErdCloud에 import ㅎㅎ  
=> 꿀팁으로 쳌리 ㄱㄱ. 인텔리J 무료버전에선 시각화ERD 기능이 지원안해서 ㅠ.

다시 언급하지만 Dto중 ResponseDto는 컨트롤러단에서 거의 100프로 쓰자. 안전을 위해서라도. 귀찮더라도 RequestDto까지 써서 하면 확실히 내부 엔티티는 숨길 수 있음.  
=> 컨트롤러 요청 파라미터를 Long id로 할 수도 있지만, RequestDto로 받을수도 있어.  
=> 반환은 정말 웬만하면 ResponseDto로 하지 엔티티 그대로 한 경험은 없었어.  
=> 마지막으로 Dto를 하면 반환때 필요시 Lazy강제초기화 잊지말자.    
=> 내부엔티티 생성자도 웬만하면 Dto를 파라미터로 받아서 쉽게 하자 ㅇㅇ.

MySQL 워크벤치에서는 계정과 포트를 추가하는거임 ㅇㅇ. 내부에서 DB생성, 테이블생성 등 하는거고.  
=> 기본적으로 root 계정으로 만드니까 로그인하고, 내부에서 새 계정 추가 + 권한 주기 하는것!

참고로 build는 gradelw build 이런식으로 ㄱ. (윈도우 커맨드에서 해야함. git bash 말고)  
=> 쳌리 배포카테고리에 바로 추가

참고로 allowPublicKeyRetrieval=true: MySQL 8.0 이상에서 필요한 보안 설정

mysql에 데이터를 추가하려고 한다. 보통 jar로 배포하다보니 데이터는 직접 db에 접근해서 sql로 추가하는게 맞는것 같은데, 지금 로컬에 있는 mysql 데이터를 cafe24의 mysql에 넣으려고한다. 쿼리문 작성에 도움을달라.   

- 백업: mysqldump -u [사용자이름] -p [데이터베이스이름] > backup.sql  
  예: mysqldump -u root -p entertainment_testdb > backup.sql  
  - 참고: mysql 접근 전에 터미널에서 해야함.
  - **참고: 직접 경로지정이나 해당 bin폴더에서 해야함.**  
    예: "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqldump" -u root -p entertainment_testdb > backup.sql
- 가져오기: mysql -u [Cafe24_사용자이름] -p [Cafe24_데이터베이스이름] < backup.sql    
  예: mysql -u root -p entertainment < backup.sql

**기존 cafe24에서 하던..   
=> 결론: 외부IP 허용해두는게 낫지 개발하려면.. 물론 테섭따로 있으면?? 본섭엔 로컬만 허용하게 해서 굳이 외부에 열필요 없는건 다 차단이 나음. 난 Spring 8080포트인데 그냥 외부 열어놨음. 테스트 서버 따로 없으니까 !! 포스트맨 테스트할려고 염.**

- **네트워크 접근 허용여부(ssh는 기본으로 설치되어서 호스팅해줬음!)**
  netstat -lntp
  sshd 이름의 :::22 또는 0.0.0.0:22 는 port22로 들어온 모든 IP 허용
  127.0.0.1:22 의 경우 로컬호스트(127.0.0.1) IP 만 허용   
  => 예로 DB의 경우 mysqld 3306포트로 로컬호스트 허용으로 추가됨을 알 수 있음

<br><br>



## ?? - 추후에 로그인 넣으면 타로ai는 사용자만 ㅇㅇ. ip기반을 사용자로 교체

<br><br>

## ?? - 리팩토링 해줘야 해~ + 배포는 도커 ㄱㄱㄹ

쳌리 함 슥 보고 적용했던 플젝 참고하면서 레고레고

python 배포는... 도커쓰자! [이걸로 하기+깃액션](https://bh946.github.io/checklist/CHECK_LIST_DEVOPS/#github-action--docker)

- 배포하려면 db도.. 또 mysql사용하는걸로 바꿔줘야 하므로 여러모로 오래걸림.

<br><br>

## 20250219~20 - perplexity api(타로ai) 기능 추가(python)

**먼저 FastApi, 장고를 스프링쳌리와 비교해서 공부 후 md정리**

- 장고는 MVC와 유사한 MVT 패턴 활용(프로젝트 구조는 ㅇㅇ 추천된거 사용) - [best](https://www.surfsidemedia.in/post/django-best-practices-for-project-structure#google_vignette)
- FastApi는 이 프로젝트 구조 사용(최신인기) - [best](https://www.restack.io/p/fastapi-answer-project-structure-best-practices), [꼭 읽기!-mvc를 직접 적용한 멋있는사람](https://jakpentest.tistory.com/entry/FastAPI-FastAPI%EC%97%90%EC%84%9C-MVC-Pattern)
- **이 자료들을 토대로 GPT활용해서 공부 후 md에 쳌리로 정리.**

**타로ai기능은 무엇? 아래 내용 GPT한테 얘기해서 바로 개발.**

- perplexity api 활용해서 자신의 현재 상황을 얘기후 해당 관련 내용으로 타로 리딩을 생성하여 반환해준다.  
  단, perplexity pro를 구독중인데 api 비용이 한계가 있어서 동일IP는 횟수에 제한을 둘 것 ! !  
  현재 로그인이 기능이 없어서 IP를 써야 할듯? IP말곤 방법없을거 아니가 동일 사용자인지 보는건??
- Pro 구독자($20/월)는 매월 $5의 API 크레딧을 자동으로 받습니다. 그래서 쓰려는거징.

**개발 후 로컬 테스트 ㄱㄱ** 

- alembic init alembic  
  alembic revision --autogenerate -m "Initial migration"  
  alembic upgrade head  
  uvicorn main:app --reload --host 0.0.0.0 --port 8000

- SQL Lite였나 DB 마이그레이션 하고, 서버 실행해서 테스트

- 포스트맨으로 리딩 post 테스트 하겠따.

  - Post로 localhost:8000/api/v1/reading 주소로 아래처럼 요청하면 됨.

  - ```json
    {
        "situation": "최근 이직을 고민하고 있습니다",
        "question": "이직이 좋은 선택일까요?"
    }
    ```

  - 다만 응답이 이상해용. 아래에서 수정하자

**일단 여까지 하고** 이력서딱 플젝 넣어서 정리좀 ㄱ.   
그리고 나서 md정리하던거 마저 더 정리하깅ㅇㅇ..

그리고 https://docs.perplexity.ai/guides/getting-started 여기 가이드 확인하라고 얘기해서 프롬프트를 완벽하게 세팅하는 연습이 필요할 듯. 애초에 응답이 아마 길 필요도없고, 타로카드 선택된거 받아서 적용시켜야 하거등요~!. 그리고 어떤 프롬프트 세팅이 퀄리티 높은지도 잘 알아야지?

디자인패턴.. mvc->mvp->mvvm+3-tier 이거 좀 ... **노션에 직무면접쪽에 추가 정리 ㅠ**. (mvvm은 코틀린에서 했던건지 파악할 필요가 있음)  - 아키텍처 패턴이나 디자인 패턴이나 뭐가 더 넓은 범위의 의미인지만 다르지 걍 비슷비슷한 의미임 ㅇㅇ.

- [MVC패턴그림참고만](https://velog.io/@leesomyoung/MVC-%ED%8C%A8%ED%84%B4-vs-3-tier-architecture), [MVC와3-Tier아키텤 이거보기](https://velog.io/@donghokim1998/MVC-%ED%8C%A8%ED%84%B4%EA%B3%BC-3-Tier-Architecture)  
  - 유사하다보니 보통 MVC패턴와 3-Tier아키텍쳐 비슷하게 보는듯 ㅇㅇ. 
  - 정리 및 의견
    - 3계층 아키텍처는 클라이언트와 데이터 계층 사이에 반드시 비즈니스(서비스) 계층이 있어야 한다는 점에서 데이터 흐름이 **선형**인 반면,
    - MVC 패턴은 일반적으로 **삼각형** 구조를 띨 수 있는데, 이는 View와 Model 간 직접적인 업데이트나 Controller를 통한 간접적인 업데이트 등 상호작용 방식이 유연하기 때문입니다.
    - 같은 애플리케이션이라도 구현 목적이나 적용 대상에 따라 두 패턴 모두 사용될 수 있으며, 이를 단순히 이름만 다른 것으로 보기는 어렵습니다.
    - 예를 들어, 순수 자바 코드나 UI 중심 애플리케이션(데스크탑 앱)에서는 MVC 패턴이 더 적합할 수 있지만, 전체 시스템의 데이터 흐름을 엄격하게 관리해야 하는 웹 애플리케이션의 경우 3계층 아키텍처가 유리할 수 있습니다.

<br><br>

## 20250216 - H2->MySQL 변경 및 배포(cafe24) + backup.sql

**application.yml에 프로필 적용 (개발용, 배포용)**

로컬에서 MySQL 잘 되는지 테스트 ㅇㅋ

**배포 기기 => cafe24에 entertainment 사용자 용도 계정 mysql 추가 ㄱㄱ(root를 쓸 순 없으니)**

- 참고로 allowPublicKeyRetrieval=true: MySQL 8.0 이상에서 필요한 보안 설정

```sql
사용자 권한 (root를 쓰기엔 위험하니..)
use mysql : mysql DB에서 계정설정 가능
select host, user, plugin, authentication_string from user : 계정조회

MySQL 5.7 이상부터 CREATE USER 구문을 사용하여 계정을 생성한다는 점
//내부ip(localhost) 접속 가능 계정
CREATE USER '계정아이디'@'localhost' IDENTIFIED BY '비밀번호';
ex) create user 'etUser'@'localhost' identified by '1234';

GRANT ALL PRIVILEGES ON *.* TO '계정아이디'@'호스트';
ex) grant all privileges on *.* to 'testId1'@'localhost';
ex) grant all privileges on entertainment.* to 'etUser'@'localhost';

//권한 부여. 이건 안해도 되긴 할거임.
FLUSH PRIVILEGES;
```

**80포트 3000 포트포워딩**

* 등록 : `sudo iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080`
* 조회 : `iptables -nL PREROUTING -t nat --line-numbers`
* 삭제 : `iptables -t nat -D PREROUTING {number}`

**build해서 구하고 jar를. 아래 명ㄹ령어 ㄱ. (뒤에껀 비활성화 임.)**

- java -jar entertainment-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod

- nohup java -jar entertainment-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod &

<br>

**로컬 데이터베이스를 cafe24로 이동. backup.sql**

- 백업: mysqldump -u [사용자이름] -p [데이터베이스이름] > backup.sql  
  예: mysqldump -u root -p entertainment_testdb > backup.sql  
  적용한예: "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqldump" -u root -p entertainment_testdb > backup.sql
  - 참고: mysql 접근 전에 터미널에서 해야함.
- 가져오기: mysql -u [Cafe24_사용자이름] -p [Cafe24_데이터베이스이름] < backup.sql    
  예: mysql -u root -p entertainment < backup.sql

**배포 섭 테스트는 포스트맨에서 URL 확인 ㄱ.**

<br><br>

## 20250209 - 찐 기능 개발~ 이제 프론트 브랜치로 ㄱ

데이터도 다 넣었고. 배포단계면 할게 더 많지만, 아직 개발단계니까..  
컨트롤러 프론트에 줄 찐 기능개발 넣고 끝내자 백은.

예상기능

1. **오늘의 타로**-> 숏츠꺼, 건강, 직업, 재물(돈), 사랑 "중에서 1개 랜덤으로 출력 ㄱ"

   CardReadingController에 엔드포인트 1개만들고,   
   22개중 선택한 카드의 카드넘버를 @PathVariable로 받아서 TarotCard찾고  

   해당 TarotCard외래키꺼 CardReading을 다 가져와서 총 개수(3개*카테고리수\*타입수) 중 랜덤으로 1개 출력해서  
   inner class인 반환Dto에 프론트에 줄 필드들 담아서 반환해주기

2. **카테고리별 타로**-> 건강, 직업, 재물(돈), 사랑을 파트별로 ㄱ

   이하동문인데 카테고리까지 @PathVariable로 받아서 총개수(3개\*1*2) 중 랜덤으로 1개 출력!  
   따라서 CardReading레포에 findByTarotCardAndCategory 이것도 필요하겠죠?

3. Yes or NO-> 정방향Yes, 역방향No + 해당 타로의 의미까지!

   **카테고리별 타로에서 만든 함수 그대로 쓰면 됨 ㅇㅇ.**

예상화면 => 프론트 브랜치로 이동하자 ㅇㅇ

1. 오늘의 타로

   "참고 사이트 처럼" 하고. 카드 선택할땐 딱히 서버API요청 필요없음. 카드 선택했을때 서버 요청!!  
   무슨 카드를 선택하던 서버에서 랜덤 선택 출력할겅ㅇㅇ.

2. 카테고리별 타로

   이하동눔

3. Yes Or No 

   이하동문인데,

   웹에 아래처럼 출력하면 될 듯 ~

   22개 카드를 보여주고 고르게 ㄱ. 정방향, 역방향은 고른 카드에서 랜덤 출력 ㄱ.

   예상 출력 화면은 아래처럼

   YES!
   황제 카드의 키워드는 ?, ?, ?, ? 입니다!
   general...

   다른 카드 고르기(버튼)

<br><br>

## 20250206~8 - TDD -> 컨트롤러 순으로 마무리.

1. **레포, 서비스**, **컨트롤러**도 바로 ㄱ.ㄱ

   **엔티티 ReadingCategory 없애고 Enum으로 바꾸겠음. 아무리 생각해도 여러 추가할 속성이 있을것 같지가 않음ㅇㅇ. Enum에 추가해도 충분함.**

   **tdd부터**

   **java 코드로 json파일 2개 다 테이블에 넣기?**

   ​	**이미 구동중인 서버인 경우**

   1. REST API를 통한 데이터 삽입

   2. 데이터베이스에 직접 SQL 실행

   3. 서버 재시작과 함께 InitDb 사용 **=> 구동중이 아닌 경우는 이거처럼 init.java로 ㄱㄱ**

      **init.java와 함께 applicaiont.yml설정도 잘 고려**

2. **포스트맨 테스트**

3. **뭐.. 시간나면 ERDCloud 만들어 두장 ㅇㅇ.**

   JPA Buddy 플러그인 깔아서 인텔리J에서 엔티티바로 SQL-DDL 뽑아서 ErdCloud에 import ㅎㅎ
   
   [ErdCloud](https://www.erdcloud.com/d/oaJ29JnAdQEMsRWps) 

<br>

tdd 하는데 레포지토리가 원래 사용하던건 원하던 결과가 잘 나왔는데 Spring Jpa Data 넣고 존ㄴ나 이상하네;;  
=> ㅇㅋ.. 오해했따.

**쩃든. 그냥 사용하면 Optional<> 로 반환하므로 orElse(null) 또는 orElseThrow(new ... ) 등 이런식으로 사용하기.**

<br><br>

## 20250202~3 - oracle, api 개발. -> MySQL 사용하기로.

1. oracle에 삽입 -> **perplexity로 테이블 구조 추천!** 검증 후 oracle로 삽입!

   **orange는 1달 무료 끝나서 sql*plus를 사용하겠음.(oracle client 설치할 때 같이 딸려서 설치 된 것 같음. 바로 이 tool 사용 ㄱㄱ)**

   sql developer의 경우 깔려있긴한데 뭐 설정해야할 것 같아서 안함. (참고로 얜 java로 만든거라 jdbc 구현되어 있어서 oracle client가 필요없는 tool임. 공홈에 배포 중)

   ㄴㄴㄴ sql*plus 너무 cli만 있어서 불편. **sql developer 나중에 설치 ㄱㄱ**

   잠깐 MySQL과 Oracle 비교 중..

   중요: MySQL의 Database 단위로 만들어서 접속하는것과 오라클에 하나의 DB에 접속해서 User를 만들어 사용하는것과 유사  
   => 오라클 DB는 각 사용자 별로 테이블, 인덱스, 뷰 등의 **객체가 따로 생성**

   1. MySQL

      - 물리적으로 분리된 여러 데이터베이스 생성 가능

      - DATABASE = SCHEMA 개념 사용

   2. Oracle

      - 하나의 큰 데이터베이스 인스턴스 사용
      - USER = SCHEMA 개념 사용
      - 또한, 너무 메모리 사용이 큼. "대기업"이 선호하지 "중소는 MySQL 사용!"

   **결론: MySQL로 노선 틀겠음**

   **cmd-sqlplus** => 사용X (MySQL 쓸거임)

   ```cmd
   -- db 서버(STR)와 리스너 실행 필수
   sqlplus username/password            -- 일반 접속 (본인: testUser/1234)
   sqlplus / as sysdba                 -- SYSDBA로 접속 (대장)
   sqlplus /nolog                      -- DB 접속없이 SQL*Plus 실행[1][3]
   show user							-- 현재 사용자 확인
   SELECT name FROM v$database;         -- 데이터베이스 이름 확인 (본인: STR)
   SELECT table_name FROM user_tables;  -- 현재 사용자의 테이블 확인
   EXIT 또는 QUIT   -- SQL*Plus 종료[3]
   ```

   **MySQL 워크벤치 쓰기로(돌고래GUI) -> 나중에 본섭 옮길때나 ㄱㄱ H2 DB 먼저 사용하겠음.**

   예상구조는..? => 바로 스프링에서 개발ㄱㄱ

   1. 구한 데이터 json 속성 키값 형태 참고해서 관계 테이블 예상해보겠음

      **타로 카드 테이블** -> 22장 넣으면 됨. 비교적 간단.

      **타로 리딩 테이블 + 타로 카테고리 테이블**

      - 카드 해석할 떄 카테고리의 경우 general, health... 등 여러개인데 나중에 추가 될 수도 있으니 따로 테이블을 추가해서 외래키로 연결하겠다. (어차피 외래키는 인덱스 자동 추가 많이 되니까 성능도 별로 안 느릴거임 ㅇㅇ)
        - 근데, 아마 고정될 듯..? 더 추가 안할 것 같 으 ㄴ느 낌
        - **바로 추가했다. YesNo를 여기다가 넣기로**
      - Daily의 경우 카테고리가 여러개인데(general, health..), 나중에 데이터가 너~무 많아지면 그때 테이블 분할 하던지 하자. 지금은 한번에 이곳에 다 넣기!
        - **테이블 파티셔닝은 카테고리 기준으로 하면 되니까 이거하면 성능은 더 좋아질 것 같다.(DB튜닝)**
        - **참고:** 데이터 규모가 작을 때(100만 행 이하)는 분할 이점 미미
        - **분할 전환 조건**:특정 카테고리(예: YesNo)의 조회 비중이 70% 이상, 데이터 행 수가 100만 행 이상, 디스크 I/O가 병목지점으로 확인될 때
          - 생각해보니 데이터 규모가작아서 절대 분할 안할듯

      **예상 테이블 구조:**

      ```sql
      -- 카드 기본 정보 테이블
      TarotCard
          tarot_card_id BIGINT AUTO_INCREMENT PRIMARY KEY,
          name_en VARCHAR(100) NOT NULL,
          name_kr VARCHAR(100) NOT NULL,
          card_number INT NOT NULL UNIQUE,
          image_url VARCHAR(255),
          keyword VARCHAR(500),
          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
      -- 해석 카테고리 테이블 -> 제거하고 Enum으로 변경
      ReadingCategory
          reading_category_id BIGINT AUTO_INCREMENT PRIMARY KEY,
          category_name VARCHAR(20) NOT NULL UNIQUE
      -- 카드 해석 내용 테이블
      CardReading
          card_reading_id BIGINT AUTO_INCREMENT PRIMARY KEY,
          tarot_card_id BIGINT NOT NULL,
          reading_type ENUM('upright', 'reversed') NOT NULL,
          reading_category_id BIGINT NOT NULL,
          description TEXT NOT NULL,
          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
          FOREIGN KEY (card_id) REFERENCES tarotcards(tarot_card_id),
          FOREIGN KEY (category_id) REFERENCES readingcategories(reading_category_id)
      ```

      **관계 분석:**

      - TarotCard: ReadingCategory = 직접적인 관계가 없음
      - CardReading : ReadingCategory = N:1
        - 하나의 카테고리는 여러 개의 해석에 사용될 수 있음
      - TarotCard : CardReading = 1:N
        - 하나의 카드는 여러 개의 해석을 가질 수 있음

2. 스프링 백엔드 API 개발

   0. **환경설정**

       README.md 참고 - 라이브러리는 일단 기본적인 spring-data-jpa,lombok,h2 ㄱㄱ

       인텔리J는 바로 setting, gradle 둘다 설정 -> 자바17, IntelliJ Idea

   1. **테이블 예상 구조도로 엔티티 설계 ㄱ + 테스트 rr**

      h2 db 생성-> jdbc:h2:file:~/entertainment/tarot -> jdbc:h2:tcp://localhost/~/entertainment/tarot

   2. **레포, 서비스**, 컨트롤러도 바로 ㄱ.ㄱ

       **엔티티 ReadingCategory 없애고 Enum으로 바꾸겠음. 아무리 생각해도 여러 추가할 속성이 있을것 같지가 않음ㅇㅇ. Enum에 추가해도 충분함.**

       tdd부터

   3. java 코드로 json파일 2개 다 테이블에 넣기

3. 포스트맨 테스트

3. 뭐.. 시간나면 ERDCloud 만들어 두장 ㅇㅇ.

<br><br>

## 20250201 - 백엔드 스프링 시작: 타로 ㄱㄱ (계획)

타로 부터 ㄱㄱ. 진하게 표시 위주로 바로 ㄱㄱ

흠... 어떤기능?

1. **22장(메이저 아르카나)의 카드 중 1장 선택 -> [참고](https://www.horoscope.com/us/tarot/tarot-daily-love.aspx) 사이트 처럼 화면 구성 ㄱ**
   1. 오늘의 타로-> 숏츠꺼, 건강, 직업, 재물(돈), 사랑 "중에서 1개 랜덤으로 출력 ㄱ"
   2. 카테고리별 타로-> 건강, 직업, 재물(돈), 사랑을 파트별로 ㄱ
   3. Yes or NO-> 정방향Yes, 역방향No + 해당 타로의 의미까지!
2. perplexity ai 활용한 질문+타로카드=리딩 출력
   1. Python에서 할거라 거기서 다시 정리해서 해보자.
   2. 추후엔 최대한 작은 AI모델 가져다가 학습 후 호스팅서버에서 직접 돌리는걸로..ㅇ..ㅇ...ㅇ
3. 회원 로그인 등도 구해둬서 기록하게하자. (이건 추후에.. 타로에선.. 딱히?)

<br>

**"숏츠꺼, 건강, 직업, 재물(돈), 사랑, Yes Or No" 파트별 타로 데이터 셋 구하기**

1. **perplexity ai로 직접 수집하자.. 3개씩 정도 ㄱㄱ. (추후에 더 추가하자. 지금은 3개만..)**

   구하는 프롬프트는 노션 참고 -> 중복 최대한 덜 부탁중.

   웹에는 아래처럼 출력 하자.

   "참고" 사이트 처럼 ㄱ.ㄱ.ㄱ.ㄱ.ㄱ

2. **Yes Or No 는 뭐.. 1개만 ㄱㄱ.** 

   웹에 아래처럼 출력하면 될 듯 ~

   22개 카드를 보여주고 고르게 ㄱ. 정방향, 역방향은 고른 카드에서 랜덤 출력 ㄱ.

   예상 출력 화면은 아래처럼

   YES!
   황제 카드의 키워드는 ?, ?, ?, ? 입니다!
   general...

   다른 카드 고르기(버튼)

<br>

**개발 시작하기.**

1. **데이터 수집 -> perplexity ai 활용 + "계속하기" 자동화 프로그램도 개발**

<br><br>

## 20250201 - 성능+보안 꼭 체크

### 성능 최적화 전략

1. **캐싱 전략**: Redis로 반복 조회 데이터 처리 [4](https://slashdev.io/-guide-to-building-fast-backends-in-spring-boot-in-2024) [39](https://digma.ai/10-spring-boot-performance-best-practices/)

   ```java
   @Cacheable(value = "users", key = "#userId")
   public User getUser(String userId) {
       // DB 조회 로직
   }
   ```

2. **비동기 처리**: @Async + CompletableFuture 활용[4](https://slashdev.io/-guide-to-building-fast-backends-in-spring-boot-in-2024)[39](https://digma.ai/10-spring-boot-performance-best-practices/)

3. **JVM 튜닝**: G1 GC + 힙 메모리 최적화[39](https://digma.ai/10-spring-boot-performance-best-practices/)

4. **쿼리 최적화**: JPA Hint + Batch Size 조정[4](https://slashdev.io/-guide-to-building-fast-backends-in-spring-boot-in-2024)[38](https://www.ijraset.com/research-paper/efficient-backend-development-with-spring-boot)

### 보안 강화 방안

- **HTTPS 강제 적용**: Spring Security 설정[4](https://slashdev.io/-guide-to-building-fast-backends-in-spring-boot-in-2024)[12](https://www.reddit.com/r/java/comments/g6zjdj/what_is_the_benefit_of_using_java_spring_boot_and/)
- **CSRF 보호**: REST API에서는 비활성화[12](https://www.reddit.com/r/java/comments/g6zjdj/what_is_the_benefit_of_using_java_spring_boot_and/)
- **SQL 인젝션 방지**: JPA Parameter Binding 활용[12](https://www.reddit.com/r/java/comments/g6zjdj/what_is_the_benefit_of_using_java_spring_boot_and/)
- **보안 헤더**: Content-Security-Policy 설정[12](https://www.reddit.com/r/java/comments/g6zjdj/what_is_the_benefit_of_using_java_spring_boot_and/)
